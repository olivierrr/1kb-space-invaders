function cc(){return e=$.createElement("canvas"),e.style.position="absolute",e.width=W,e.height=H,$.body.appendChild(e),e.getContext("2d")}function v(a,b){return a.x<b.x+10&&a.x+10>b.x&&a.y<b.y+10&&a.y+10>b.y}for($=document,W=innerWidth,H=innerHeight,c=cc(),c2=cc(),p=0,z=.05,b=[],n=[],m=Math,k={},a=0,s=.001,f="fillRect",q="forEach",l="length",o=0,i=5;i--;)for(j=3;j--;)n.push({x:.1*i+.1*j,y:.1*j}),c2[f](W/5*i+.05*W,.7*H,W/10,100);onkeydown=onkeyup=function(a){k[a.keyCode]="keyup"!=a.type},function d(){o++,c.clearRect(0,0,W,H),k[65]|k[68]&&(p=m.min(m.max(p+=k[65]?-.01:.01,0),1-z)),k[32]&&1>o%5&&b.push({x:p,y:1,v:-.01}),ff=n[~~(m.random()*n[l])],1>o%20&&n[l]>0&&b.push({x:ff.x,y:ff.y,v:.01}),b[q](function(d,e){x=W*d.x-5+H*z/2,y=(d.y+=d.v)*H,d.y>H|d.y<0&&(a=1),c2.getImageData(x,y,1,1).data[3]>0&&(c2.globalCompositeOperation="destination-out",c2.beginPath(),c2.arc(x,y,20,0,7),c2.fill(),a=1),n[q](function(a){v(d,a)&&console.log("!")}),c[f](x,y,10,40),1===a&&(b.splice(e,1),a=0)}),n[q](function(a){a.x>.97|a.x<0&&(s*=-1,n[q](function(a){a.y+=.15})),c[f](W*(a.x+=s),H*a.y,30,30)}),c[f](W*p,H-H*z,H*z,H*z),requestAnimationFrame(d)}();